> Комбинаторные задачи занимаются подсчетом кол-ва комбинаций

### Материалы
[Комбинаторика](https://vk.com/video/@club226681184?z=video-226681184_456240018%2Fpl_-226681184_-2)
[Перестановки](https://yandex.ru/video/preview/10963442794440065659)
[Перестановки. Практика](https://yandex.ru/video/preview/11447285727251292363)
[Сочетание](https://vk.com/video/@club226681184?z=video-226681184_456240024%2Fpl_-226681184_-2)
[Сочетание. Практика](https://vk.com/video/@club226681184?z=video-226681184_456240025%2Fpl_-226681184_-2)

### Тезисы
- Факториал - это произведение чисел от 1 до n:
  `5! = 1 * 2 * 3 * 4 * 5`;

### Введение
#### Правило суммы
> Задача: необходимо добраться от пункта **A** в пункт **B**

**ИЛИ** (`OR`) это сумма (`+`)

![[Pasted image 20240829132612.png | 350]]

Добраться из пункта **A** в пункт **B** мы можем:
- по пути `1` **ИЛИ** `2` **OR** `3` **OR** `4`

Т.е. общее кол-во комбинаций путей: `1 + 1 + 1 + 1` = **4**

#### Правило произведения
> Задача: необходимо добраться от пункта **A** в пункт **C**

**И** (`AND`) это произведение (`×`)

![[Pasted image 20240829132643.png | 300]]
Чтобы добраться от `A` до `C`, нужно пройти:
> от `A` до `B` **И** от `B` до `C`

Добраться из **A** в **C** мы можем:
- (`1` или `2` или `3`) **И** (`4` или `5`)

Т.е. общее кол-во комбинаций путей: `(1 + 1 + 1)` **×**  `(1 + 1)` = **6**

####  Задачи на правила + и ×
##### Пин-код
> Какое кол-во комбинаций 4х значного пинкода.

- всего 10 цифр

![[Pasted image 20240829135734.png | 300]]

###### 1. С повторением цифр
Получается что на каждую ячейку будет условие:
`1` **или** `2` **или** `3` **или** `4` **или** `5` **или** `6` **или** `7` **или** `8` **или** `9` **или** `0`

А между ячейками будет: `1` **и** `2` **и** `3` **и** `4`

Решение: `10 × 10 × 10 × 10` = **10 000**

###### 2. Без повторения цифр
`10 × 9 × 8 × 7` = **5 040**

###### 3. Пин-код, как число, должен делится на 5 (с повторением цифр)
`9 × 10 × 10 × 2` = **5 040**

- 1-я ячейка: все цифры, кроме нуля, число не может начинаться с `0`;
- 4-я ячейка: цифры, которые отвечают признаку деления на 5 (`0` и `5`).
<br>

### Перестановка
> Кол-во уникальных комбинаций из множества эл-тов.
 
Т.е. мы будем переставлять эл-ты множества местами и будим считать кол-во их уникальных комбинаций.

#### Example
> Рассмотрим на примере перестановки 3-х значного числа.

#### Перестановка множества (без повторения)
> все переставляемые эл-ты уникальны (**множество**).

Формула:
`P(n) = n!`,
где `n` - кол-во эл-тов.

#### Перестановка с повторяющимися эл-тами
[Перестановка с повторениями](https://yandex.ru/video/preview/8261772281895923028)

> Из-за того, что некоторые объекты набора эл-тов становятся идентичными `->` кол-во различных способов комбинации всех эл-тов уменьшается ровно во столько, сколькими способами мы могли бы расставить эти повторяющиеся эл-ты, если бы они различались.

Формула :
![[Pasted image 20240830123738.png]]
где
- `n` - общее кол-во эл-тов;
- `k` - кол-во повторяющихся эл-тов.

##### Суть
###### Пример с 3 книгами (2 одинаковые)
![[Pasted image 20240830114351.png]]
- кол-во комбинаций уменьшается во столько раз, сколько бы существовало перестановок для повторяющихся эл-тов (если они были бы различны).
- В данном примере кол-во повторяющихся эл-тов = **2** `->` кол-во комбинаций уменьшится на `2!`.

###### 5 книг (3 одинаковые)
![[Pasted image 20240830121315.png]]

Видно, что если бы книги **B** были различные, то из одной расстановки получилось бы в **6** раз больше комбинаций.

**Из-за чего так происходит?**
Из-за того, что **3** эл-та мы можем переставить `P(3)` способами (т.е. **3!** раз).

Если бы эл-ты **B** были бы различные, мы бы получили в `P(3)` раз больше способов расстановки этих книг (на картинке обозначено <font style="color:red">x Pз</font>).

**Значит мы можем использовать обратную логику**
Значит у нас способов расставить `5` книг, `3` из которых одинаковые,  будет в `P(3)` **меньше**, чем кол-во способов расставить `5` различных книг (`P(5) / P(3)`).

##### Examples
###### Example 1
Кол-во комбинаций букв слова **пара**:
`4!/2! = 24/2 = 12`

###### Example 2
**МАТЕМАТИКА**
`P(n)` = <math><mfrac><mrow><mn>10</mn><mo>!</mo></mrow><mrow><mn>2</mn><mo>!</mo><mo>&#xd7;</mo><mn>3</mn><mo>!</mo><mo>&#xd7;</mo><mn>2</mn><mo>!</mo></mrow></mfrac></math> = 151 200

Повторяющиеся буквы:
- `М`: 2
- `A`: 3
- `Т`: 2

#### Вложенные перестановки
> Кейс: дано 7 книг, из них 3 книги одного автора, остальные разных. Сами книги не повторяются. Найти `P(n)`. При этом книги одного автора всегда должны располагаться рядом.

При таком условии получаем две вложенные перестановки:
- `P(5)` - 4 книги не повторяющихся авторов + 1 эл-нт из книг одного автора. Книги одного автора рассматриваем за 1 эл-нт множества, т.к. они должны стоять всегда рядом.
- `P(3)` - 3 книги одного автора.

Формула:
`P(n) * P(r) = n! * r!`, где
- `n` - общее кол-во эл-тов внешней перестановки;
- `r` - кол-во эл-тов внутренней перестановки.

Решение:
`P(5) * P(3)` = `5! * 3!` = `120 * 6` = `720`
<br>
### Размещение
> это кол-во комбинаций **выбора** `k` эл-тов из `n` эл-тов.
> или
> кол-во размещения `n` по `k`;

У нас есть множество из `n` эл-тов и нам нужно разместить эти эл-ты в другом множестве размером `k` эл-тов.
Эти `k` эл-тов мы будем выбирать из `n`.

В размещении важен порядок, как именно мы будем размещать эл-ты. Т.е. в отличии от **Сочетания**, где `123` и `321` это одно и тоже, в размещении это разные эл-ты.

##### Как выбрать что `n`, а что `k` ?
- просто принимаем, что `n > k`

Если `n == k` - то это **Перестановка** (<math><msubsup><mi>A</mi><mi>n</mi><mi>k</mi></msubsup><mo>=</mo><mi>n</mi><mo>!</mo></math>).

#### Размещение без повторения
Формула:
![[Pasted image 20240829151612.png | 300]]
где:
- `n` - сколько всего эл-тов
- `k` - по сколько эл-тов надо разместить

##### Examples
###### Поезда и пути
> Дано: 7 путей и 4 поезда.
> Найти кол-во возможных размещений 4-х поездов на 7 путях.

![[Pasted image 20240829155125.png | 450]]

- `Первый` поезд может разместится на одном из **7** путей, `второй` - на **6** путях, `третий` - **5** и `четвертый` - **4**;
- если буквально, то тут мы размещаем пути в поезда (но это не важно, ведь все это относительно и для расчета кол-ва комбинаций не имеет значения что во что размещается);
- `7` **AND** `6` **AND** `5` **AND** `4` = `7 × 6 × 5 × 4` = **840**.

Или по формуле:
<math><msubsup><mi>A</mi><mn>7</mn><mn>4</mn></msubsup><mo>=</mo><mfrac><mrow><mn>7</mn><mo>!</mo></mrow><mrow><mrow><mo>(</mo><mrow><mn>7</mn><mo>-</mo><mn>4</mn></mrow><mo>)</mo></mrow><mo>!</mo></mrow></mfrac><mo>=</mo><mn>7</mn><mo>&#xd7;</mo><mn>6</mn><mo>&#xd7;</mo><mn>5</mn><mo>&#xd7;</mo><mn>4</mn><mo>=</mo><mn>840</mn></math>

###### Монеты и ячейки
> Дано: 8 монет и 5 ячеек.
> Найти кол-во возможных размещений 8-ми монет в 5 ячейках.

Относительно задачи про пути и поезда, эта задача с обратным условием на первый взгляд. Но мы всегда просто принимаем, что `n > k`. Следовательно, в этой задаче `n` = 8 (монеты), а `k` = 5 (ячейки).

![[Pasted image 20240829153618.png | 450]]

- `8` **AND**  `7` **AND** `6` **AND** `5` **AND** `4` = `8 × 7 × 6 × 5 × 4` = **6720**

Или по формуле:
<math><msubsup><mi>A</mi><mn>8</mn><mn>5</mn></msubsup><mo>=</mo><mfrac><mrow><mn>8</mn><mo>!</mo></mrow><mrow><mrow><mo>(</mo><mrow><mn>8</mn><mo>-</mo><mn>5</mn></mrow><mo>)</mo></mrow><mo>!</mo></mrow></mfrac><mo>=</mo><mn>8</mn><mo>&#xd7;</mo><mn>7</mn><mo>&#xd7;</mo><mn>6</mn><mo>&#xd7;</mo><mn>5</mn><mo>&#xd7;</mo><mn>4</mn><mo>=</mo><mn>6720</mn></math>

#### Размещение с повторениями
> Сколько велосипедистов в клубе, если их номера 3-х значные. И из-за суеверий в номере не используются цифры `8` и `0`.

При чем тут размещение ?
> Мы будем размещать восемь цифр в 3-х значное число. При этом цифры в числе могут повторяться.

![[Pasted image 20240829162611.png | 400]]

- `8` **AND** `8` **AND** `8` = `8 × 8 × 8` = **512**.

Формула:
![[Pasted image 20240829162148.png | 250]]

- <math><msubsup><mi>A</mi><mn>8</mn><mn>3</mn></msubsup><mo>=</mo><msup><mn>8</mn><mn>3</mn></msup><mo>=</mo><mn>512</mn></math>
<br>

### Сочетание
> Кол-во комбинаций (сочетаний), составленных из `n` различных эл-тов множества по `k` эл-тов в каждом сочетании.
> Внутри одной отдельной комбинации **порядок эл-тов не важен**.

#### Сочетание без повторений
Формула:
![[Pasted image 20240829101725.png | 300]]
где:
- `n` - общее кол-во эл-тов множества (из которых и будут составляться сочетания)
- `k` - кол-во эл-тов, входящих в каждое сочетание

##### Example 1
> В группе 10 человек (`n`). Рассчитать кол-во сочетаний всех этих человек в подгруппах по 3 человека (`k`).

`10! / ((10! - 3!) * 3!)` = **120**

##### Example 2
> Рассчитать кол-во не повторяющихся билетов, включающих в себя 2 вопроса (`k`), которые можно составить из 20 разных вопросов (`n`).

В этой задаче необходимо множество эл-тов разбить на подмножества, внутри которых **порядок эл-тов не важен**. Ведь это совершенно одинаковые билеты:

![[Pasted image 20240829103236.png | 500]]

Исходя из этих условий сюда подходит решение через **сочетания**.

`20! / ((20! - 2!) * 2!)` = **190**

##### Example 3
> Дано: `a // b`, на прямой `a` - 7 точек,  `b` - 5 точек.
> Сколько существует (`∃`) треугольников с вершинами в этих точках ?

![[Pasted image 20240829114926.png]]

###### Рассуждения
Есть 2 варианта построить треугольник по точкам на двух `//`-ых прямых:
- Взять 1 точку на прямой `a` и 2 точки на `b`;
- Взять 1 точку на прямой `b` и 2 точки на `a`;

При этом нам не важен порядок точек, которые берутся для построения треугольника `->` сочетание.

###### Решение
Алгоритмы построения треугольников по точкам:
1. `a`(1 точка) и `b`(2 точки)
   берем `1` точку из `7` **И**(`AND` - умножение) `2` точки из `5` :  <math><msubsup><mi>C</mi><mi>7</mi><mi>1</mi></msubsup></math> `*` <math><msubsup><mi>C</mi><mi>5</mi><mi>2</mi></msubsup></math>
   <br>
1.  `b`(1 т) и `a`(2 т)
   берем `1` точку из `5` **AND** `2` точки из `7` :  <math><msubsup><mi>C</mi><mi>5</mi><mi>1</mi></msubsup></math> `*` <math><msubsup><mi>C</mi><mi>7</mi><mi>2</mi></msubsup></math>

> Как мы можем построить треугольники? (всеми возможными способами)

Можно построить Δ-ки по 1 алгоритму **ИЛИ**(`OR` это +) по 2 алгоритму:

(<math><msubsup><mi>C</mi><mi>7</mi><mi>1</mi></msubsup></math> `*` <math><msubsup><mi>C</mi><mi>5</mi><mi>2</mi></msubsup></math>) `+` (<math><msubsup><mi>C</mi><mi>5</mi><mi>1</mi></msubsup></math> `*` <math><msubsup><mi>C</mi><mi>7</mi><mi>2</mi></msubsup></math>) = <math><mfrac><mrow><mn>7</mn><mo>!</mo></mrow><mrow><mo>(</mo><mn>7</mn><mo>-</mo><mn>1</mn><mo>)</mo><mo>!</mo><mo>&#xA0;</mo><mo>&#xd7;</mo><mo>&#xA0;</mo><mn>1</mn><mo>!</mo></mrow></mfrac></math> `+` <math><mfrac><mrow><mn>5</mn><mo>!</mo></mrow><mrow><mrow><mo>(</mo><mrow><mn>5</mn><mo>-</mo><mn>2</mn></mrow><mo>)</mo></mrow><mo>!</mo><mo>&#xA0;</mo><mo>&#xd7;</mo><mo>&#xA0;</mo><mn>2</mn><mo>!</mo></mrow></mfrac></math> `=` <math><mn>7</mn><mo>&#xd7;</mo><mfrac><mrow><mn>5</mn><mo>!</mo></mrow><mrow><mn>3</mn><mo>!</mo><mo>&#xd7;</mo><mn>2</mn><mo>!</mo></mrow></mfrac></math> `=` 7 × 10 = 70

#### Сочетание с повторениями
> Повторение означает, что эл-ты в самом сочетании могут повторяться.
> При этом порядок остается **НЕ** важен (как и в сочетании без повторений).

Например, теперь в сочетании 3-х чисел из `n = {1, 2, 3, 4, 5}` могут быть сочетания: `{1, 1, 4}`, `{3, 3, 3}`, `{2, 5, 2}` и т.д.
- эл-ты могут повторяться в сочетании;
- `5, 5, 2` это тоже самое, что и `2, 5, 2` (порядок **НЕ** важен).

#####  Разберем суть на примере
> Есть `3` типа монет (10₽, 5₽, 1₽). Считаем, что кол-во каждого типа монет **∞**.
> Мы берем и выбираем любые `5` монет и кладем их в карман.
> Сколькими способами (комбинациями) можно выбрать `5` монет?

- порядок выбора монет не важен;
- монеты могут повторяться;

Дано:
- 3 типа монет (`n`)
- 5 монет выбрать (`k`)

Получаем:
- 2 разделителя (`n - 1`)
- 7 объектов всего (`n + k - 1`)

![[Pasted image 20240831114401.png]]

> Преобразуем задачу к виду: совокупность **эл-тов** (`монеты`) и **разделителей**.

**Что это значит ?**
Мы добавляем разделители между типами монет.
Чтобы разделить `3` типа **->** нужно `2` разделителя.

Для однозначности упорядочим типы монет: `1₽` **первый разделитель** `5₽` **|** `10₽`.
При этом, если какого-то типа элементов не окажется в выборке `->` разделители все равно остаются. Так мы можем однозначно определить типы эл-тов, попавших в выборку.

По положению разделителей мы можем однозначно определить какие эл-ты попали в выборку. Т.к. мы сами определили правила, что типы монет идут в следующем порядке : `рубли`**->** `пятерки` **->** `десятки`, а между ними разделители:
![[Pasted image 20240831110846.png]]
- таким образом задача сводится к тому, чтобы определить сколькими комбинациями мы можем передвинуть разделители в общей совокупности ячеек (`кол-во эл-тов выборки` **+** `кол-во разделителей`).
- в этой задаче: сколькими способами мы можем передвинуть **2** разделителя (`n - 1`) в **7** ячейках (`k + n - 1`).
  - А это уже сочетание без повторений: <math><msubsup><mi>C</mi><mn>7</mn><mn>2</mn></msubsup></math>
  - Т.к. порядок разделителей нам не важен: `{1-й разделитель `->` 2 ячейка; 2-й разделитель `->` 5 ячейка}` это тоже самое что и `{1-й | `->` 5 ячейка; 2-й | `->` 2 ячейка}`.

<br>
После сведения задачи к общему виду:

> поиск кол-ва сочетаний из `k + n - 1` эл-тов по `n - 1` (**разделители**) эл-тов в каждом сочетании.

Нам уже не важна упорядоченности типов этих элементов (`{1₽ | 5₽ | 10₽}` **или** `{1₽ | 5₽ | 10₽}` ), т.к. нам не надо определять однозначность положения этих типо относительно друг друга для подсчета кол-ва комбинаций.
  

